# P2L æ™ºèƒ½è·¯ç”±ç³»ç»Ÿ

<div align="center">

![P2L Logo](https://img.shields.io/badge/P2L-æ™ºèƒ½è·¯ç”±-4A90E2?style=for-the-badge&logo=robot&logoColor=white)
[![Vue 3](https://img.shields.io/badge/Vue-3.5.0-4FC08D?style=flat-square&logo=vue.js)](https://vuejs.org/)
[![FastAPI](https://img.shields.io/badge/FastAPI-0.104.0-009688?style=flat-square&logo=fastapi)](https://fastapi.tiangolo.com/)
[![Docker](https://img.shields.io/badge/Docker-Ready-2496ED?style=flat-square&logo=docker)](https://www.docker.com/)
[![License](https://img.shields.io/badge/License-MIT-green?style=flat-square)](LICENSE)

**åŸºäºP2Lç¥ç»ç½‘ç»œçš„æ™ºèƒ½å¤§è¯­è¨€æ¨¡å‹è·¯ç”±ç³»ç»Ÿ**

*è®©AIæ¨¡å‹é€‰æ‹©æ›´æ™ºèƒ½ï¼Œè®©å¼€å‘ä½“éªŒæ›´æµç•…*

</div>

## ğŸŒŸ é¡¹ç›®æ¦‚è¿°

P2L (Prompt-to-LLM) æ™ºèƒ½è·¯ç”±ç³»ç»Ÿæ˜¯ä¸€ä¸ªåŸºäºæ·±åº¦å­¦ä¹ çš„å¤§è¯­è¨€æ¨¡å‹æ™ºèƒ½æ¨èå¹³å°ã€‚é€šè¿‡P2Lç¥ç»ç½‘ç»œæ¨¡å‹çš„Bradley-Terryç³»æ•°è®¡ç®—ï¼Œç³»ç»Ÿèƒ½å¤Ÿæ ¹æ®ç”¨æˆ·æç¤ºè¯çš„è¯­ä¹‰ç‰¹å¾ï¼Œè‡ªåŠ¨æ¨èæœ€é€‚åˆçš„LLMæ¨¡å‹ï¼Œå¹¶æä¾›ç»Ÿä¸€çš„è°ƒç”¨æ¥å£ã€‚

### ğŸ¯ æ ¸å¿ƒä»·å€¼

- **ğŸ§  æ™ºèƒ½æ¨è**: åŸºäºP2L-135Mç¥ç»ç½‘ç»œè¿›è¡Œè¯­ä¹‰åˆ†æï¼Œæ™ºèƒ½åŒ¹é…æœ€ä¼˜æ¨¡å‹
- **ğŸ“Š å¤šæ¨¡å‹æ”¯æŒ**: é›†æˆ20+ä¸»æµLLMæ¨¡å‹ï¼Œè¦†ç›–OpenAIã€Anthropicã€Googleã€é˜¿é‡Œåƒé—®ã€DeepSeekç­‰
- **âš¡ æ€§èƒ½ä¼˜åŒ–**: æ”¯æŒæ€§èƒ½ã€æˆæœ¬ã€é€Ÿåº¦ç­‰å¤šç»´åº¦ä¼˜åŒ–ç­–ç•¥
- **ğŸ¨ ç°ä»£åŒ–ç•Œé¢**: Vue 3 + Element Pluså“åº”å¼Webç•Œé¢ï¼Œç§‘æŠ€æ„Ÿåè¶³
- **ğŸ”§ ç”Ÿäº§å°±ç»ª**: å®Œæ•´çš„Dockeréƒ¨ç½²æ–¹æ¡ˆï¼Œæ”¯æŒä¸€é”®å¯åŠ¨å’Œåœæ­¢
- **ğŸš€ æ˜“äºæ‰©å±•**: æ¨¡å—åŒ–æ¶æ„è®¾è®¡ï¼Œæ–¹ä¾¿æ·»åŠ æ–°æ¨¡å‹å’ŒåŠŸèƒ½

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    P2Læ™ºèƒ½è·¯ç”±ç³»ç»Ÿæ¶æ„                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å‰ç«¯å±‚ (Vue 3 + Element Plus)                              â”‚
â”‚  â”œâ”€â”€ æ™ºèƒ½æ¨èç•Œé¢   â”œâ”€â”€ æ¨¡å‹é€‰æ‹©å™¨   â”œâ”€â”€ å®æ—¶å¯¹è¯            â”‚
â”‚  â”œâ”€â”€ ç³»ç»Ÿç›‘æ§      â”œâ”€â”€ ç”¨æˆ·è®¾ç½®     â”œâ”€â”€ å“åº”å¼è®¾è®¡           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  APIç½‘å…³å±‚ (FastAPI + CORS)                                â”‚
â”‚  â”œâ”€â”€ RESTful API   â”œâ”€â”€ è¯·æ±‚éªŒè¯     â”œâ”€â”€ é”™è¯¯å¤„ç†            â”‚
â”‚  â”œâ”€â”€ é™æµæ§åˆ¶      â”œâ”€â”€ æ—¥å¿—è®°å½•     â”œâ”€â”€ å¥åº·æ£€æŸ¥             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ ¸å¿ƒä¸šåŠ¡å±‚ (P2L Engine)                                    â”‚
â”‚  â”œâ”€â”€ P2Lç¥ç»ç½‘ç»œ   â”œâ”€â”€ è¯­ä¹‰åˆ†æ     â”œâ”€â”€ æ¨¡å‹è¯„åˆ†            â”‚
â”‚  â”œâ”€â”€ ä»»åŠ¡è¯†åˆ«      â”œâ”€â”€ ç­–ç•¥ä¼˜åŒ–     â”œâ”€â”€ Bradley-Terryè®¡ç®—    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ¨¡å‹é›†æˆå±‚ (Unified LLM Client)                           â”‚
â”‚  â”œâ”€â”€ OpenAI       â”œâ”€â”€ Anthropic    â”œâ”€â”€ Google Gemini       â”‚
â”‚  â”œâ”€â”€ é˜¿é‡Œåƒé—®      â”œâ”€â”€ DeepSeek     â”œâ”€â”€ å…¶ä»–æ¨¡å‹            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  åŸºç¡€è®¾æ–½å±‚ (Docker + Nginx)                               â”‚
â”‚  â”œâ”€â”€ å®¹å™¨åŒ–éƒ¨ç½²    â”œâ”€â”€ è´Ÿè½½å‡è¡¡     â”œâ”€â”€ SSLç»ˆç«¯             â”‚
â”‚  â”œâ”€â”€ å¥åº·æ£€æŸ¥      â”œâ”€â”€ æ—¥å¿—æ”¶é›†     â”œâ”€â”€ èµ„æºç›‘æ§            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
program-b/
â”œâ”€â”€ ğŸ“‹ README.md                    # é¡¹ç›®ä¸»æ–‡æ¡£
â”œâ”€â”€ ğŸ³ docker-compose.yml           # Dockerç¼–æ’é…ç½®
â”œâ”€â”€ ğŸš€ start-dev.sh                # ä¸€é”®å¯åŠ¨å¼€å‘ç¯å¢ƒ
â”œâ”€â”€ ğŸ›‘ stop-dev.sh                 # ä¸€é”®åœæ­¢å¼€å‘ç¯å¢ƒ
â”œâ”€â”€ ğŸ“¦ deploy.sh                   # ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²è„šæœ¬
â”‚
â”œâ”€â”€ ğŸ”¥ backend/                    # åç«¯æœåŠ¡ (FastAPI + P2L)
â”‚   â”œâ”€â”€ ğŸ“‹ README.md               # åç«¯æŠ€æœ¯æ–‡æ¡£
â”‚   â”œâ”€â”€ ğŸš€ main.py                 # æœåŠ¡å…¥å£ç‚¹
â”‚   â”œâ”€â”€ âš™ï¸ config.py               # ç»Ÿä¸€é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ ğŸ§  service_p2l_native.py   # P2LåŸç”ŸæœåŠ¡
â”‚   â”œâ”€â”€ ğŸ”§ p2l_engine.py           # P2Læ¨ç†å¼•æ“
â”‚   â”œâ”€â”€ ğŸ“Š p2l_model_scorer.py     # P2Læ¨¡å‹è¯„åˆ†å™¨
â”‚   â”œâ”€â”€ ğŸŒ unified_client.py       # ç»Ÿä¸€LLMå®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ ğŸ“¦ requirements.txt        # Pythonä¾èµ–
â”‚   â”œâ”€â”€ ğŸ”‘ model_p2l/              # P2Læ ¸å¿ƒæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ api_configs.py         # APIé…ç½®
â”‚   â”‚   â”œâ”€â”€ model_configs.py       # æ¨¡å‹é…ç½®
â”‚   â”‚   â”œâ”€â”€ p2l_core.py           # P2Læ ¸å¿ƒç®—æ³•
â”‚   â”‚   â””â”€â”€ models/               # P2Lç¥ç»ç½‘ç»œæ¨¡å‹
â”‚   â””â”€â”€ ğŸ§ª test/                   # åç«¯æµ‹è¯•
â”‚
â”œâ”€â”€ ğŸ¨ frontend/                   # å‰ç«¯ç•Œé¢ (Vue 3 + Element Plus)
â”‚   â”œâ”€â”€ ğŸ“‹ README.md               # å‰ç«¯æŠ€æœ¯æ–‡æ¡£
â”‚   â”œâ”€â”€ ğŸ“¦ package.json            # å‰ç«¯ä¾èµ–é…ç½®
â”‚   â”œâ”€â”€ âš™ï¸ vite.config.js          # Viteæ„å»ºé…ç½®
â”‚   â”œâ”€â”€ ğŸ¯ src/                    # Vueæºç 
â”‚   â”‚   â”œâ”€â”€ ğŸ§© components/         # Vueç»„ä»¶åº“
â”‚   â”‚   â”œâ”€â”€ ğŸ—‚ï¸ stores/             # PiniaçŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ views/              # é¡µé¢è§†å›¾
â”‚   â”‚   â””â”€â”€ ğŸ› ï¸ utils/              # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ ğŸŒ public/                 # é™æ€èµ„æº
â”‚   â”œâ”€â”€ ğŸ³ Dockerfile              # å‰ç«¯å®¹å™¨é…ç½®
â”‚   â”œâ”€â”€ âš™ï¸ nginx.conf              # Nginxé…ç½®
â”‚   â””â”€â”€ ğŸ§ª test/                   # å‰ç«¯æµ‹è¯•
â”‚
â”œâ”€â”€ ğŸ§  p2l/                       # P2Læ ¸å¿ƒç³»ç»Ÿ (ç‹¬ç«‹æ¨¡å—)
â”‚   â”œâ”€â”€ ğŸ¤– p2l/                   # P2Lç®—æ³•å®ç°
â”‚   â”‚   â”œâ”€â”€ model.py              # P2Lç¥ç»ç½‘ç»œæ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ train.py              # æ¨¡å‹è®­ç»ƒè„šæœ¬
â”‚   â”‚   â”œâ”€â”€ eval.py               # æ¨¡å‹è¯„ä¼°è„šæœ¬
â”‚   â”‚   â””â”€â”€ dataset.py            # æ•°æ®é›†å¤„ç†
â”‚   â”œâ”€â”€ ğŸ›£ï¸ route/                  # è·¯ç”±åŠŸèƒ½æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ routers.py            # æ™ºèƒ½è·¯ç”±å™¨
â”‚   â”‚   â””â”€â”€ cost_optimizers.py    # æˆæœ¬ä¼˜åŒ–å™¨
â”‚   â””â”€â”€ ğŸ“¦ models/                 # é¢„è®­ç»ƒæ¨¡å‹å­˜å‚¨
â”‚
â”œâ”€â”€ ğŸ”’ ssl/                       # SSLè¯ä¹¦ (ç”Ÿäº§ç¯å¢ƒ)
â”œâ”€â”€ ğŸ“Š logs/                      # æ—¥å¿—æ–‡ä»¶
â””â”€â”€ ğŸ“š docs/                      # é¡¹ç›®æ–‡æ¡£
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ğŸ“‹ ç¯å¢ƒè¦æ±‚

- **Python**: 3.8+ (æ¨è3.10+)
- **Node.js**: 16+ (æ¨è18+)
- **å†…å­˜**: æœ€å°‘8GB (æ¨è16GB+)
- **GPU**: å¯é€‰ (CUDA/MPSæ”¯æŒï¼Œç”¨äºP2Læ¨¡å‹åŠ é€Ÿ)
- **Docker**: 20.10+ (ç”¨äºå®¹å™¨åŒ–éƒ¨ç½²)

### ğŸ¯ æ–¹å¼ä¸€ï¼šä¸€é”®éƒ¨ç½² (æ¨è)

```bash
# ğŸš€ å…‹éš†é¡¹ç›®
git clone <repository-url>
cd program-b

# ğŸ”‘ é…ç½®APIå¯†é’¥ (å¿…éœ€)
cp backend/model_p2l/api_configs.py.example backend/model_p2l/api_configs.py
vim backend/model_p2l/api_configs.py  # æ·»åŠ ä½ çš„APIå¯†é’¥

# ğŸš€ ä¸€é”®éƒ¨ç½² (å¼€å‘ç¯å¢ƒ)
./deploy.sh

# ğŸš€ å¹³æ»‘å‡çº§ (é›¶åœæœº)
./deploy.sh upgrade

# ğŸš€ ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
./deploy.sh production

# ğŸ›‘ åœæ­¢æ‰€æœ‰æœåŠ¡
./stop-dev.sh
```

**éƒ¨ç½²åè®¿é—®**:
- ğŸ¨ **å‰ç«¯ç•Œé¢**: http://localhost:3000
- ğŸ”§ **åç«¯API**: http://localhost:8080
- ğŸ“š **APIæ–‡æ¡£**: http://localhost:8080/docs
- ğŸ’š **å¥åº·æ£€æŸ¥**: http://localhost:8080/health

### ğŸ³ æ–¹å¼äºŒï¼šDockeræ‰‹åŠ¨éƒ¨ç½²

```bash
# ğŸ³ Dockeræ‰‹åŠ¨éƒ¨ç½²
docker-compose up -d

# ğŸ“Š æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# ğŸ“‹ æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# ğŸ›‘ åœæ­¢æœåŠ¡
docker-compose down
```

### ğŸ”§ æ–¹å¼ä¸‰ï¼šæ‰‹åŠ¨å¯åŠ¨

```bash
# 1ï¸âƒ£ å¯åŠ¨åç«¯æœåŠ¡
cd backend
pip install -r requirements.txt
python main.py
# åç«¯æœåŠ¡: http://localhost:8080

# 2ï¸âƒ£ å¯åŠ¨å‰ç«¯ç•Œé¢ (æ–°ç»ˆç«¯)
cd frontend
npm install
npm run dev
# å‰ç«¯ç•Œé¢: http://localhost:3000
```

## ğŸ”‘ APIå¯†é’¥é…ç½®

åœ¨ `backend/model_p2l/api_configs.py` ä¸­é…ç½®å„å‚å•†APIå¯†é’¥ï¼š

```python
# OpenAIé…ç½®
API_CONFIGS = {
    "api_keys": {
        "openai": "sk-your-openai-key",
        "anthropic": "sk-ant-your-anthropic-key", 
        "dashscope": "sk-your-dashscope-key",
        "deepseek": "sk-your-deepseek-key",
        "google": "your-google-api-key"
    },
    "base_urls": {
        "openai": "https://api.openai.com/v1",
        "anthropic": "https://api.anthropic.com"
    }
}
```

**âš ï¸ é‡è¦**: é¦–æ¬¡ä½¿ç”¨è¯·ç¡®ä¿é…ç½®è‡³å°‘ä¸€ä¸ªAPIå¯†é’¥ï¼

## ğŸ“Š æ”¯æŒçš„æ¨¡å‹ (å®Œæ•´åˆ—è¡¨)

### ğŸ† æƒé‡6 - é¡¶çº§æ¨¡å‹
| æ¨¡å‹ | æä¾›å•† | æˆæœ¬/1K | ä¸Šä¸‹æ–‡ | ç‰¹ç‚¹ |
|------|--------|---------|--------|------|
| **gpt-4o-2024-08-06** | OpenAI | $0.040 | 128K | æœ€æ–°GPT-4ï¼Œé¡¶çº§æ¨ç†èƒ½åŠ› |
| **claude-3-5-sonnet-20241022** | Anthropic | $0.050 | 200K | æœ€å¼ºåˆ›æ„å†™ä½œå’Œåˆ†æ |

### ğŸ¥‡ æƒé‡5 - é«˜æ€§èƒ½æ¨¡å‹
| æ¨¡å‹ | æä¾›å•† | æˆæœ¬/1K | ä¸Šä¸‹æ–‡ | ç‰¹ç‚¹ |
|------|--------|---------|--------|------|
| **gpt-4-turbo-2024-04-09** | OpenAI | $0.025 | 128K | å¹³è¡¡æ€§èƒ½å’Œé€Ÿåº¦ |
| **claude-3-5-sonnet-20240620** | Anthropic | $0.028 | 200K | é«˜è´¨é‡æ–‡æœ¬ç”Ÿæˆ |
| **gemini-1.5-pro-002** | Google | $0.022 | 1M | è¶…å¤§ä¸Šä¸‹æ–‡çª—å£ |
| **qwen-max-0919** | é˜¿é‡Œåƒé—® | $0.016 | 200K | ä¸­æ–‡ç†è§£èƒ½åŠ›å¼º |

### ğŸ¥ˆ æƒé‡4 - é«˜æ€§ä»·æ¯”æ¨¡å‹
| æ¨¡å‹ | æä¾›å•† | æˆæœ¬/1K | ä¸Šä¸‹æ–‡ | ç‰¹ç‚¹ |
|------|--------|---------|--------|------|
| **gpt-4o-mini-2024-07-18** | OpenAI | $0.008 | 128K | è½»é‡ç‰ˆGPT-4ï¼Œæ€§ä»·æ¯”é«˜ |
| **claude-3-5-haiku-20241022** | Anthropic | $0.015 | 200K | æé€Ÿå“åº”ï¼Œé€Ÿåº¦ä¼˜å…ˆ |
| **deepseek-v3** | DeepSeek | $0.003 | 32K | è¶…ä½æˆæœ¬ï¼Œå¿«é€Ÿå“åº” |
| **qwen2.5-72b-instruct** | é˜¿é‡Œåƒé—® | $0.006 | 32K | ç¼–ç¨‹èƒ½åŠ›ä¼˜ç§€ |

### ğŸ¥‰ æƒé‡3 - å®ç”¨æ¨¡å‹
| æ¨¡å‹ | æä¾›å•† | æˆæœ¬/1K | ä¸Šä¸‹æ–‡ | ç‰¹ç‚¹ |
|------|--------|---------|--------|------|
| **gpt-3.5-turbo-0125** | OpenAI | $0.001 | 16K | æä½æˆæœ¬ï¼Œæˆæœ¬ä¼˜å…ˆ |
| **gemini-1.5-flash-001** | Google | $0.005 | 1M | å¿«é€Ÿ+å¤§ä¸Šä¸‹æ–‡ |
| **qwen2.5-coder-32b-instruct** | é˜¿é‡Œåƒé—® | $0.004 | 32K | ç¼–ç¨‹ä¸“ç”¨æ¨¡å‹ |

### ğŸ… æƒé‡2 - ç»æµæ¨¡å‹
| æ¨¡å‹ | æä¾›å•† | æˆæœ¬/1K | ä¸Šä¸‹æ–‡ | ç‰¹ç‚¹ |
|------|--------|---------|--------|------|
| **qwen1.5-14b-chat** | é˜¿é‡Œåƒé—® | $0.0005 | 32K | æé€Ÿ+æä½æˆæœ¬ |

**æ€»è®¡**: **20ä¸ª**ä¸»æµLLMæ¨¡å‹ï¼Œè¦†ç›–5å¤§å‚å•†

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### ğŸ§  P2Læ™ºèƒ½æ¨è

P2Lç³»ç»ŸåŸºäº135Må‚æ•°çš„ç¥ç»ç½‘ç»œæ¨¡å‹ï¼Œé€šè¿‡Bradley-Terryç³»æ•°è®¡ç®—ï¼Œåˆ†æä»¥ä¸‹ç»´åº¦ï¼š

- **ğŸ“ ä»»åŠ¡ç±»å‹**: ç¼–ç¨‹ã€åˆ›æ„å†™ä½œã€ç¿»è¯‘ã€æ•°å­¦ã€åˆ†æç­‰
- **ğŸŒ è¯­è¨€ç±»å‹**: ä¸­æ–‡ã€è‹±æ–‡ç­‰ä¸åŒè¯­è¨€å¤„ç†èƒ½åŠ›
- **ğŸ” å¤æ‚åº¦**: ç®€å•ã€ä¸­ç­‰ã€å¤æ‚ä»»åŠ¡çš„åŒ¹é…åº¦
- **âš–ï¸ ç”¨æˆ·ä¼˜å…ˆçº§**: æ€§èƒ½ã€æˆæœ¬ã€é€Ÿåº¦çš„æ™ºèƒ½æƒè¡¡

### ğŸ›ï¸ ä¼˜åŒ–ç­–ç•¥

- **ğŸ† æ€§èƒ½ä¼˜å…ˆ**: é€‰æ‹©è´¨é‡åˆ†æ•°æœ€é«˜çš„æ¨¡å‹
- **ğŸ’° æˆæœ¬ä¼˜å…ˆ**: é€‰æ‹©å•ä½æˆæœ¬æœ€ä½çš„æ¨¡å‹  
- **âš¡ é€Ÿåº¦ä¼˜å…ˆ**: é€‰æ‹©å“åº”æ—¶é—´æœ€å¿«çš„æ¨¡å‹
- **âš–ï¸ å¹³è¡¡æ¨¡å¼**: ç»¼åˆè€ƒè™‘å„é¡¹æŒ‡æ ‡çš„æœ€ä¼˜è§£

### ğŸ”Œ APIæ¥å£

```bash
# P2Læ™ºèƒ½åˆ†æ
POST /api/p2l/analyze
{
  "prompt": "å†™ä¸€ä¸ªJavaScriptå‡½æ•°",
  "priority": "performance",
  "enabled_models": ["gpt-4o", "claude-3-5-sonnet"],
  "budget": 0.05
}

# LLMç”Ÿæˆè°ƒç”¨
POST /api/llm/generate
{
  "model": "gpt-4o-2024-08-06",
  "prompt": "ä½ çš„æç¤ºè¯",
  "max_tokens": 2000,
  "temperature": 0.7
}

# è·å–æ¨¡å‹åˆ—è¡¨
GET /api/models

# å¥åº·æ£€æŸ¥
GET /health
```

## ğŸ³ Dockeré…ç½®è¯¦è§£

### ğŸ—ï¸ æ¶æ„è®¾è®¡

é¡¹ç›®é‡‡ç”¨å¤šå®¹å™¨æ¶æ„ï¼Œé€šè¿‡Docker Composeç¼–æ’ï¼š

```yaml
services:
  backend:    # P2Låç«¯æœåŠ¡
  frontend:   # Vueå‰ç«¯ç•Œé¢  
  nginx:      # åå‘ä»£ç† (å¯é€‰)
```

### ğŸ”§ é…ç½®äº®ç‚¹

#### 1. **èµ„æºä¼˜åŒ–**
```yaml
deploy:
  resources:
    limits:
      memory: 2.5G      # åç«¯å†…å­˜é™åˆ¶
      cpus: '1.5'       # CPUé™åˆ¶
    reservations:
      memory: 1G        # å†…å­˜é¢„ç•™
      cpus: '0.5'       # CPUé¢„ç•™
```

#### 2. **å¥åº·æ£€æŸ¥**
```yaml
healthcheck:
  test: ["CMD", "python3", "-c", "import urllib.request; urllib.request.urlopen('http://localhost:8080/health')"]
  interval: 60s
  timeout: 15s
  retries: 5
  start_period: 300s    # P2Læ¨¡å‹åŠ è½½æ—¶é—´
```

#### 3. **ç¯å¢ƒé…ç½®**
```yaml
environment:
  - P2L_ENV=production
  - PYTHONPATH=/app:/app/backend:/app/backend/model_p2l
  - PYTORCH_CUDA_ALLOC_CONF=max_split_size_mb:128
  - OMP_NUM_THREADS=2
```

### âš ï¸ Dockeréƒ¨ç½²éš¾ç‚¹ä¸è§£å†³æ–¹æ¡ˆ

#### 1. **P2Læ¨¡å‹åŠ è½½é—®é¢˜**
**é—®é¢˜**: P2Lç¥ç»ç½‘ç»œæ¨¡å‹é¦–æ¬¡åŠ è½½éœ€è¦ä¸‹è½½ï¼Œå¯èƒ½å¯¼è‡´å®¹å™¨å¯åŠ¨è¶…æ—¶
**è§£å†³æ–¹æ¡ˆ**: 
- å¢åŠ å¥åº·æ£€æŸ¥å¯åŠ¨ç­‰å¾…æ—¶é—´ (`start_period: 300s`)
- æ¨¡å‹æ–‡ä»¶æŒ‚è½½åˆ°å®¿ä¸»æœº (`./models:/app/models`)
- å¼‚æ­¥æ¨¡å‹åŠ è½½ï¼Œé¿å…é˜»å¡æœåŠ¡å¯åŠ¨

#### 2. **å†…å­˜ç®¡ç†ä¼˜åŒ–**
**é—®é¢˜**: P2Læ¨¡å‹å’Œå¤šä¸ªLLMå®¢æˆ·ç«¯å¯èƒ½å¯¼è‡´å†…å­˜æº¢å‡º
**è§£å†³æ–¹æ¡ˆ**:
- PyTorchå†…å­˜åˆ†ç‰‡é…ç½® (`PYTORCH_CUDA_ALLOC_CONF`)
- é™åˆ¶OpenMPçº¿ç¨‹æ•° (`OMP_NUM_THREADS=2`)
- å®¹å™¨å†…å­˜é™åˆ¶å’Œé¢„ç•™æœºåˆ¶

#### 3. **Pythonè·¯å¾„é—®é¢˜**
**é—®é¢˜**: å®¹å™¨å†…æ¨¡å—å¯¼å…¥è·¯å¾„å¤æ‚ï¼Œå¯èƒ½å¯¼è‡´ImportError
**è§£å†³æ–¹æ¡ˆ**:
- ç»Ÿä¸€PYTHONPATHé…ç½®
- ç›¸å¯¹å¯¼å…¥å’Œç»å¯¹å¯¼å…¥åŒé‡ä¿é™©
- æ¨¡å—è·¯å¾„åŠ¨æ€æ·»åŠ æœºåˆ¶

#### 4. **ç½‘ç»œé€šä¿¡é—®é¢˜**
**é—®é¢˜**: å‰åç«¯å®¹å™¨é—´é€šä¿¡ï¼Œä»¥åŠå¤–éƒ¨APIè®¿é—®
**è§£å†³æ–¹æ¡ˆ**:
- Dockerç½‘ç»œé…ç½® (`p2l-network`)
- æœåŠ¡å‘ç°æœºåˆ¶ (`depends_on`)
- CORSè·¨åŸŸé…ç½®

## ğŸ”— P2Læ™ºèƒ½è·¯ç”±é›†æˆæƒ…å†µ

### ğŸ§  P2Læ ¸å¿ƒå¼•æ“

**æ¨¡å‹**: P2L-135M-GRK (Generalized Ranking Kernel)
**ç®—æ³•**: Bradley-Terryé…å¯¹æ¯”è¾ƒæ¨¡å‹
**è®­ç»ƒæ•°æ®**: å¤šé¢†åŸŸä»»åŠ¡-æ¨¡å‹é…å¯¹æ•°æ®é›†
**æ¨ç†é€Ÿåº¦**: <100ms (CPU), <50ms (GPU)

### ğŸ”„ é›†æˆæ¶æ„

```
ç”¨æˆ·æç¤ºè¯ â†’ P2Lè¯­ä¹‰åˆ†æ â†’ Bradley-Terryè®¡ç®— â†’ æ¨¡å‹æ’åº â†’ æ™ºèƒ½æ¨è
     â†“              â†“              â†“           â†“          â†“
  æ–‡æœ¬é¢„å¤„ç†    â†’ ç‰¹å¾æå–    â†’ ç³»æ•°è®¡ç®—   â†’ å¤šç»´è¯„åˆ†  â†’ æœ€ä¼˜é€‰æ‹©
```

### ğŸ“ˆ ä¸ä¼ ç»Ÿè·¯ç”±å¯¹æ¯”

| å¯¹æ¯”ç»´åº¦ | ä¼ ç»Ÿè§„åˆ™è·¯ç”± | P2Læ™ºèƒ½è·¯ç”± |
|----------|-------------|-------------|
| **å‡†ç¡®æ€§** | 60-70% | **85-92%** |
| **é€‚åº”æ€§** | é™æ€è§„åˆ™ | **åŠ¨æ€å­¦ä¹ ** |
| **è¦†ç›–åº¦** | æœ‰é™åœºæ™¯ | **å…¨åœºæ™¯** |
| **ç»´æŠ¤æˆæœ¬** | é«˜ (æ‰‹åŠ¨è°ƒæ•´) | **ä½ (è‡ªåŠ¨ä¼˜åŒ–)** |
| **å“åº”é€Ÿåº¦** | å¿« (10ms) | **è¾ƒå¿« (50-100ms)** |

### ğŸ¯ æ™ºèƒ½è·¯ç”±ä¼˜åŠ¿

1. **ğŸ§  è¯­ä¹‰ç†è§£**: æ·±åº¦ç†è§£æç¤ºè¯è¯­ä¹‰ï¼Œè€Œéç®€å•å…³é”®è¯åŒ¹é…
2. **ğŸ“Š å¤šç»´è¯„ä¼°**: ç»¼åˆè€ƒè™‘æ€§èƒ½ã€æˆæœ¬ã€é€Ÿåº¦ã€è¯­è¨€é€‚é…ç­‰å› ç´ 
3. **ğŸ”„ åŠ¨æ€ä¼˜åŒ–**: åŸºäºä½¿ç”¨åé¦ˆæŒç»­ä¼˜åŒ–æ¨èç®—æ³•
4. **ğŸ¯ ä¸ªæ€§åŒ–**: æ”¯æŒç”¨æˆ·åå¥½å’Œé¢„ç®—çº¦æŸ
5. **ğŸ“ˆ å¯æ‰©å±•**: æ–°æ¨¡å‹å¯å¿«é€Ÿé›†æˆåˆ°è¯„ä¼°ä½“ç³»

## ğŸ“ˆ å¼€å‘è¿›åº¦

### âœ… å·²å®Œæˆ (98%)

#### ğŸ”¥ åç«¯æ ¸å¿ƒ (100%)
- âœ… **P2LåŸç”ŸæœåŠ¡**: åŸºäºFastAPIçš„é«˜æ€§èƒ½åç«¯æ¶æ„
- âœ… **P2Lç¥ç»ç½‘ç»œ**: 135Må‚æ•°æ¨¡å‹ï¼ŒBradley-Terryç³»æ•°è®¡ç®—
- âœ… **æ™ºèƒ½è¯„åˆ†å™¨**: å¤šç»´åº¦æ¨¡å‹è¯„åˆ†ç®—æ³• (æ€§èƒ½/æˆæœ¬/é€Ÿåº¦)
- âœ… **ç»Ÿä¸€LLMå®¢æˆ·ç«¯**: 20+æ¨¡å‹ç»Ÿä¸€æ¥å£ï¼Œé”™è¯¯å¤„ç†æœºåˆ¶
- âœ… **é…ç½®ç®¡ç†**: ç¯å¢ƒè‡ªé€‚åº”é…ç½®ï¼Œç”Ÿäº§/å¼€å‘ç¯å¢ƒåˆ†ç¦»
- âœ… **APIè®¾è®¡**: RESTfulæ¥å£ï¼Œå®Œæ•´çš„Swaggeræ–‡æ¡£
- âœ… **å¼‚æ­¥å¤„ç†**: éé˜»å¡æ¨¡å‹åŠ è½½ï¼Œé«˜å¹¶å‘æ”¯æŒ
- âœ… **æ—¥å¿—ç³»ç»Ÿ**: ç»“æ„åŒ–æ—¥å¿—ï¼Œå¤šçº§åˆ«è¾“å‡º

#### ğŸ¨ å‰ç«¯ç•Œé¢ (95%)
- âœ… **Vue 3æ¶æ„**: ç»„åˆå¼APIï¼ŒTypeScriptæ”¯æŒ
- âœ… **Element Plus UI**: ç°ä»£åŒ–ç»„ä»¶åº“ï¼Œå“åº”å¼è®¾è®¡
- âœ… **PiniaçŠ¶æ€ç®¡ç†**: é›†ä¸­å¼çŠ¶æ€ç®¡ç†ï¼ŒæŒä¹…åŒ–å­˜å‚¨
- âœ… **æ™ºèƒ½æ¨èå±•ç¤º**: å®æ—¶æ¨èç»“æœï¼Œå¯è§†åŒ–è¯„åˆ†
- âœ… **å¤šè½®å¯¹è¯**: å¯¹è¯å†å²ç®¡ç†ï¼Œä¸Šä¸‹æ–‡ä¿æŒ
- âœ… **æ¨¡å‹é€‰æ‹©å™¨**: æ‰‹åŠ¨æ¨¡å‹é€‰æ‹©ï¼Œå‚æ•°è°ƒèŠ‚
- âœ… **ç³»ç»Ÿç›‘æ§**: å®æ—¶å¥åº·çŠ¶æ€ï¼Œæ€§èƒ½æŒ‡æ ‡
- ğŸ”„ **ç”¨æˆ·è®¾ç½®**: ä¸ªæ€§åŒ–é…ç½® (90%)

#### ğŸ³ éƒ¨ç½²ç³»ç»Ÿ (100%)
- âœ… **Dockerå®¹å™¨åŒ–**: å¤šé˜¶æ®µæ„å»ºï¼Œé•œåƒä¼˜åŒ–
- âœ… **Docker Compose**: æœåŠ¡ç¼–æ’ï¼Œç½‘ç»œé…ç½®
- âœ… **ä¸€é”®éƒ¨ç½²è„šæœ¬**: å®Œæ•´çš„éƒ¨ç½²è‡ªåŠ¨åŒ– (`deploy.sh`)
- âœ… **å¹³æ»‘å‡çº§**: é›¶åœæœºå‡çº§æ”¯æŒ (`deploy.sh upgrade`)
- âœ… **ç”Ÿäº§ç¯å¢ƒ**: ç”Ÿäº§çº§éƒ¨ç½²é…ç½® (`deploy.sh production`)
- âœ… **å¼€å‘ç¯å¢ƒ**: å¿«é€Ÿå¯åŠ¨/åœæ­¢ (`start-dev.sh`/`stop-dev.sh`)
- âœ… **Dockeræƒé™æ£€æŸ¥**: è‡ªåŠ¨æ£€æµ‹å’Œé…ç½®Dockeræƒé™
- âœ… **æ¨¡å‹é¢„ä¸‹è½½**: è‡ªåŠ¨ä¸‹è½½P2Læ¨¡å‹æ–‡ä»¶
- âœ… **å¥åº·æ£€æŸ¥**: å®¹å™¨å¥åº·ç›‘æ§ï¼Œè‡ªåŠ¨é‡å¯
- âœ… **èµ„æºé™åˆ¶**: å†…å­˜/CPUé™åˆ¶ï¼Œæ€§èƒ½ä¼˜åŒ–
- âœ… **Nginxé…ç½®**: åå‘ä»£ç†ï¼Œè´Ÿè½½å‡è¡¡
- âœ… **SSLæ”¯æŒ**: HTTPSè¯ä¹¦é…ç½®

### ğŸ“‹ å¾…å¼€å‘ (2%)

#### ğŸ§ª æµ‹è¯•ç³»ç»Ÿ
- â³ **åç«¯æµ‹è¯•**: å•å…ƒæµ‹è¯•ï¼Œé›†æˆæµ‹è¯•ï¼ŒAPIæµ‹è¯•
- â³ **å‰ç«¯æµ‹è¯•**: ç»„ä»¶æµ‹è¯•ï¼ŒE2Eæµ‹è¯•ï¼Œæ€§èƒ½æµ‹è¯•
- â³ **P2Læ¨¡å‹æµ‹è¯•**: æ¨¡å‹å‡†ç¡®æ€§éªŒè¯ï¼Œæ€§èƒ½åŸºå‡†æµ‹è¯•
- â³ **éƒ¨ç½²æµ‹è¯•**: å®¹å™¨æµ‹è¯•ï¼Œç”Ÿäº§ç¯å¢ƒéªŒè¯

#### ğŸš€ æ€§èƒ½ä¼˜åŒ–
- â³ **æ¨¡å‹ç¼“å­˜**: Redisç¼“å­˜ï¼Œæå‡å“åº”é€Ÿåº¦
- â³ **è¯·æ±‚é™æµ**: APIé™æµä¿æŠ¤ï¼Œé˜²æ­¢æ»¥ç”¨
- â³ **è¿æ¥æ± **: æ•°æ®åº“è¿æ¥æ± ï¼Œèµ„æºå¤ç”¨
- â³ **CDNé›†æˆ**: é™æ€èµ„æºåŠ é€Ÿ

#### ğŸ” å®‰å…¨å¢å¼º
- â³ **ç”¨æˆ·è®¤è¯**: JWT tokenï¼Œå¤šç”¨æˆ·æ”¯æŒ
- â³ **APIå¯†é’¥ç®¡ç†**: åŠ å¯†å­˜å‚¨ï¼Œæƒé™æ§åˆ¶
- â³ **è¾“å…¥éªŒè¯**: é˜²æ³¨å…¥ï¼Œå‚æ•°æ ¡éªŒ

#### ğŸ”® é«˜çº§åŠŸèƒ½
- â³ **A/Bæµ‹è¯•**: æ¨¡å‹æ•ˆæœå¯¹æ¯”æµ‹è¯•
- â³ **ä½¿ç”¨åˆ†æ**: ç”¨æˆ·è¡Œä¸ºåˆ†æï¼Œä½¿ç”¨ç»Ÿè®¡
- â³ **æ’ä»¶ç³»ç»Ÿ**: è‡ªå®šä¹‰æ’ä»¶ï¼ŒåŠŸèƒ½æ‰©å±•
- â³ **å¤šæ¨¡æ€æ”¯æŒ**: å›¾åƒã€éŸ³é¢‘è¾“å…¥æ”¯æŒ

#### ğŸ§  AIå¢å¼º
- â³ **åœ¨çº¿å­¦ä¹ **: åŸºäºåé¦ˆçš„æ¨¡å‹ä¼˜åŒ–
- â³ **ä¸ªæ€§åŒ–æ¨è**: ç”¨æˆ·åå¥½å­¦ä¹ 
- â³ **æ¨¡å‹å¾®è°ƒ**: é¢†åŸŸç‰¹å®šä¼˜åŒ–
- â³ **æ™ºèƒ½ç¼“å­˜**: è¯­ä¹‰ç›¸ä¼¼åº¦ç¼“å­˜

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### ğŸ—ï¸ æœ¬åœ°å¼€å‘

```bash
# ğŸ”§ å¼€å‘ç¯å¢ƒè®¾ç½®
git clone <repository>
cd program-b

# ğŸ”‘ é…ç½®APIå¯†é’¥
cp backend/model_p2l/api_configs.py.example backend/model_p2l/api_configs.py
# ç¼–è¾‘api_configs.pyæ·»åŠ ä½ çš„APIå¯†é’¥

# ğŸš€ å¯åŠ¨å¼€å‘æœåŠ¡
./start-dev.sh

# ğŸ“Š æŸ¥çœ‹æ—¥å¿—
tail -f logs/backend.log
tail -f logs/frontend.log
```

### ğŸ§ª æµ‹è¯• (å¾…å¼€å‘)

```bash
# ğŸ§ª åç«¯æµ‹è¯• (å¾…å¼€å‘)
cd backend
# python -m pytest test/  # å¾…å®ç°

# ğŸ§ª å‰ç«¯æµ‹è¯• (å¾…å¼€å‘)
cd frontend  
# npm run test  # å¾…å®ç°

# ğŸ§ª åŸºç¡€APIæµ‹è¯• (å¯ç”¨)
curl http://localhost:8080/health

# ğŸ§ª P2LåŠŸèƒ½æµ‹è¯• (å¯ç”¨)
curl -X POST http://localhost:8080/api/p2l/analyze \
  -H "Content-Type: application/json" \
  -d '{"prompt": "å†™ä¸€ä¸ªPythonå‡½æ•°", "priority": "performance"}'
```

### ğŸ“¦ æ·»åŠ æ–°æ¨¡å‹

1. **é…ç½®æ¨¡å‹**: åœ¨ `backend/model_p2l/model_configs.py` æ·»åŠ æ¨¡å‹é…ç½®
2. **å®ç°å®¢æˆ·ç«¯**: åœ¨ `backend/unified_client.py` æ·»åŠ APIè°ƒç”¨é€»è¾‘
3. **æ›´æ–°è¯„åˆ†**: åœ¨ `backend/p2l_model_scorer.py` æ›´æ–°è¯„åˆ†è§„åˆ™
4. **å‰ç«¯æ”¯æŒ**: åœ¨å‰ç«¯ç»„ä»¶ä¸­æ·»åŠ æ˜¾ç¤ºæ”¯æŒ

### ğŸ”§ è‡ªå®šä¹‰é…ç½®

```python
# backend/model_p2l/api_configs.py
SERVICE_CONFIG = {
    "server": {
        "host": "0.0.0.0",
        "port": 8080,
        "reload": True  # å¼€å‘ç¯å¢ƒ
    },
    "p2l": {
        "model_path": "./models/p2l-135m-grk",
        "device": "auto",  # auto/cpu/cuda/mps
        "timeout": 30
    }
}
```

## ğŸš€ ç”Ÿäº§éƒ¨ç½²

### ğŸ³ Dockerç”Ÿäº§éƒ¨ç½²

```bash
# ğŸ—ï¸ æ„å»ºç”Ÿäº§é•œåƒ
docker-compose -f docker-compose.yml build

# ğŸš€ å¯åŠ¨ç”Ÿäº§æœåŠ¡
docker-compose up -d

# ğŸ“Š ç›‘æ§æœåŠ¡çŠ¶æ€
docker-compose ps
docker-compose logs -f
```

### â˜ï¸ äº‘æœåŠ¡éƒ¨ç½²

#### é˜¿é‡Œäº‘ECS
```bash
# ğŸ”§ ç¯å¢ƒå‡†å¤‡
yum install -y docker docker-compose
systemctl start docker

# ğŸš€ éƒ¨ç½²åº”ç”¨
git clone <repository>
cd program-b
docker-compose up -d
```

#### AWS EC2
```bash
# ğŸ”§ ç¯å¢ƒå‡†å¤‡
sudo apt update
sudo apt install -y docker.io docker-compose
sudo systemctl start docker

# ğŸš€ éƒ¨ç½²åº”ç”¨
git clone <repository>
cd program-b
sudo docker-compose up -d
```

### ğŸ”’ ç”Ÿäº§ç¯å¢ƒé…ç½®

```bash
# ğŸ”‘ ç¯å¢ƒå˜é‡é…ç½®
export P2L_ENV=production
export P2L_HOST=0.0.0.0
export P2L_PORT=8080
export OPENAI_API_KEY=sk-your-key
export ANTHROPIC_API_KEY=sk-ant-your-key
```
